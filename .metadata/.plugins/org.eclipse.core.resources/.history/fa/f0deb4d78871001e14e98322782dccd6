package com.osc.cacheservice.service;

import org.springframework.beans.factory.annotation.Autowired;

import com.osc.cacheservice.cache.UserCache;
import com.osc.proto.storeUserDetailsGrpc.storeUserDetailsImplBase;
import com.osc.proto.userDetailsRequest;
import com.osc.proto.userDetailsResponse;

import io.grpc.stub.StreamObserver;
import net.devh.boot.grpc.server.service.GrpcService;

@GrpcService
public class StoreUserDetailsService extends storeUserDetailsImplBase{
	
	@Autowired
	private UserCache userCache;

	@Override
	public void getTemplateInfo(userDetailsRequest request, StreamObserver<userDetailsResponse> responseObserver) {
		super.getTemplateInfo(request, responseObserver);
		
		String userId = "user"+request.getOTP();
		userCache.saveUser(userId, request.getName(), request.getEmail(), request.getContact(), request.getDOB(), request.getPassword(), request.getOTP());
		 
	}

}
